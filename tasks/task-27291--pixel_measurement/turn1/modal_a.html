<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Measurement Widget</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            cursor: crosshair;
        }
        #full-dimensions {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            padding: 5px;
            border-radius: 5px;
            z-index: 1000;
            opacity: 1;
            transition: opacity 0.3s;
        }
        #full-dimensions:hover {
            opacity: 0;
        }
        .measurement-container {
            position: absolute;
            border: 1px dashed #000;
            pointer-events: none;
            z-index: 999;
        }
        .arrow {
            position: absolute;
            background-color: #000;
            height: 1px;
            width: 1px;
        }
        .dimension-display {
            position: absolute;
            font-size: 10px;
            background: #000;
            color: #fff;
            padding: 2px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <button>Hello</button>
    <div id="full-dimensions"></div>
    <div class="measurement-container">
        <div class="arrow" id="top-arrow"></div>
        <div class="arrow" id="right-arrow"></div>
        <div class="arrow" id="bottom-arrow"></div>
        <div class="arrow" id="left-arrow"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            const $fullDimensions = $('#full-dimensions');
            const $measurementContainer = $('.measurement-container');
            const $arrows = $('.arrow');
            let startX, startY, endX, endY, isDragging = false;

            function updateFullDimensions() {
                $fullDimensions.text(`Screen: ${screen.width}x${screen.height}`);
            }

            function startDrag(event) {
                startX = event.clientX;
                startY = event.clientY;
                isDragging = true;
            }

            function stopDrag() {
                isDragging = false;
            }

            function updateDrag(event) {
                if (isDragging) {
                    endX = event.clientX;
                    endY = event.clientY;
                    updateMeasurement();
                }
            }

            function updateMeasurement() {
                const width = Math.abs(endX - startX);
                const height = Math.abs(endY - startY);
                const posX = Math.min(startX, endX);
                const posY = Math.min(startY, endY);

                $measurementContainer.css({
                    top: `${posY}px`,
                    left: `${posX}px`,
                    width: `${width}px`,
                    height: `${height}px`
                });

                updateArrows(posX, posY, width, height);
            }

            function updateArrows(x, y, w, h) {
                $arrows.each(function() {
                    const $arrow = $(this);
                    const middleX = x + w / 2;
                    const middleY = y + h / 2;
                    const screenEdge = $arrow.attr('id').split('-')[0];
                    let arrowLength;
                    let arrowDirection;

                    switch (screenEdge) {
                        case 'top':
                            arrowLength = middleY;
                            arrowDirection = 'vertical';
                            break;
                        case 'right':
                            arrowLength = screen.width - middleX;
                            arrowDirection = 'horizontal';
                            break;
                        case 'bottom':
                            arrowLength = screen.height - middleY;
                            arrowDirection = 'vertical';
                            break;
                        case 'left':
                            arrowLength = middleX;
                            arrowDirection = 'horizontal';
                            break;
                    }

                    $arrow.css({
                        'top': arrowDirection === 'vertical' ? `${middleY}px` : `${y}px`,
                        'left': arrowDirection === 'horizontal' ? `${middleX}px` : `${x}px`,
                        'width': arrowDirection === 'horizontal' ? `${arrowLength}px` : '1px',
                        'height': arrowDirection === 'vertical' ? `${arrowLength}px` : '1px'
                    });

                    const $dimensionDisplay = $("<div class='dimension-display'>").text(`${arrowLength}px`);
                    $arrow.append($dimensionDisplay);
                });
            }

            updateFullDimensions();

            $(document).on('mousedown', startDrag)
                       .on('mousemove', updateDrag)
                       .on('mouseup', stopDrag);
        });
    </script>
</body>
</html>